<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng nhập | Sách Giáo Khoa Online</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #2c5aa0; /* Xanh dương tri thức */
            --primary-light: #4a7bc2;
            --secondary-color: #1a202c;
            --accent-color: #e74c3c; /* Đỏ cho nút quan trọng */
            --light-bg: #f8f9fa;
            --border-color: #e1e5eb;
            --text-light: #6c757d;
            --success-color: #28a745;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--light-bg);
            min-height: 100vh;
            color: var(--secondary-color);
            line-height: 1.5;
        }

        /* Header Styling */
        .main-header {
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 0;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: var(--primary-color);
        }

        .logo-icon {
            font-size: 2rem;
            color: var(--primary-color);
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .logo-subtext {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-top: -5px;
        }

        .nav-links a {
            color: var(--secondary-color);
            text-decoration: none;
            margin-left: 25px;
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-links a:hover {
            color: var(--primary-color);
        }

        /* Main Container - FIXED CENTERING */
        .main-container {
            min-height: calc(100vh - 80px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }

        /* Login Card - FIXED CENTERING */
        .login-wrapper {
            width: 100%;
            max-width: 450px;
            margin: 0 auto;
        }

        .login-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            border: 1px solid var(--border-color);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .login-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
        }

        .login-header {
            padding: 30px 30px 20px;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
        }

        .login-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            display: inline-block;
        }

        .login-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .login-subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .login-body {
            padding: 30px;
        }

        /* Form Styling */
        .form-label {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 8px;
            color: var(--secondary-color);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .form-control {
            height: 50px;
            border: 1.5px solid var(--border-color);
            border-radius: 8px;
            padding: 0 15px;
            font-size: 0.95rem;
            transition: all 0.2s;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.15);
        }

        .input-group {
            position: relative;
        }

        .password-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            z-index: 10;
        }

        .form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .form-check-input:checked {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .forgot-link {
            color: var(--primary-color);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .forgot-link:hover {
            text-decoration: underline;
        }

        /* Button Styling */
        .btn-login {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            border: none;
            color: white;
            height: 52px;
            font-weight: 600;
            font-size: 1rem;
            border-radius: 8px;
            width: 100%;
            transition: all 0.3s;
            letter-spacing: 0.5px;
        }

        .btn-login:hover {
            background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(44, 90, 160, 0.3);
        }

        /* Divider */
        .divider {
            display: flex;
            align-items: center;
            margin: 25px 0;
        }

        .divider-line {
            flex: 1;
            height: 1px;
            background-color: var(--border-color);
        }

        .divider-text {
            padding: 0 15px;
            font-size: 0.85rem;
            color: var(--text-light);
            font-weight: 500;
        }

        /* Social Login */
        .social-login {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .btn-social {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            height: 48px;
            border: 1.5px solid var(--border-color);
            background: white;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--secondary-color);
            transition: all 0.2s;
        }

        .btn-social:hover {
            background-color: #f8f9fa;
            border-color: var(--primary-light);
        }

        /* Signup Section */
        .signup-section {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            margin-top: 20px;
        }

        .signup-text {
            color: var(--text-light);
            font-size: 0.95rem;
        }

        .signup-link {
            color: var(--primary-color);
            font-weight: 600;
            text-decoration: none;
            margin-left: 5px;
        }

        .signup-link:hover {
            text-decoration: underline;
        }

        /* Footer */
        .login-footer {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            font-size: 0.8rem;
        }

        .footer-link {
            color: var(--text-light);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-link:hover {
            color: var(--primary-color);
            text-decoration: underline;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .nav-links a {
                margin: 0 10px;
            }

            .login-wrapper {
                max-width: 100%;
            }

            .login-card {
                border-radius: 10px;
            }

            .social-login {
                grid-template-columns: 1fr;
            }

            .main-container {
                padding: 20px 15px;
            }
        }

        @media (max-width: 576px) {
            .login-header, .login-body {
                padding: 25px 20px;
            }

            .form-options {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
        }

        /* Validation States */
        .is-invalid {
            border-color: #dc3545;
        }

        .invalid-feedback {
            display: none;
            font-size: 0.8rem;
            color: #dc3545;
            margin-top: 5px;
        }

        .is-invalid ~ .invalid-feedback {
            display: block;
        }

        /* Animation for focus */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .login-card {
            animation: fadeIn 0.5s ease-out;
        }

        /* Educational elements */
        .edu-badge {
            display: inline-block;
            background-color: rgba(44, 90, 160, 0.1);
            color: var(--primary-color);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-top: 5px;
        }
    </style>
</head>
<body>
<!-- Header -->
<header class="main-header">
    <div class="container">
        <div class="header-content">
            <a href="/" class="logo-container">
                <div>
                    <div class="logo-text">SÁCH GIÁO KHOA</div>
                    <div class="logo-subtext">Tri thức cho tương lai</div>
                </div>
            </a>

            <nav class="nav-links">
                <a href="/"><i class="fas fa-home me-1"></i> Trang chủ</a>
                <a href="/books"><i class="fas fa-book me-1"></i> Danh mục sách</a>
                <a href="/about"><i class="fas fa-info-circle me-1"></i> Giới thiệu</a>
            </nav>
        </div>
    </div>
</header>

<!-- Main Login Section - FIXED CENTERING -->
<main class="main-container">
    <div class="login-wrapper">
        <div class="login-card">
            <div class="login-header">
                <div class="login-icon">
                    <i class="fas fa-book-open"></i>
                </div>
                <h1 class="login-title">ĐĂNG NHẬP</h1>
                <p class="login-subtitle">Truy cập tài khoản của bạn</p>
                <div class="edu-badge">Học sinh & Giáo viên</div>
            </div>

            <div class="login-body">
                <form method="post" action="/login" th:action="@{/login}">
                    <!-- Username/Email Field -->
                    <div class="mb-4">
                        <label class="form-label" for="username">
                            <i class="fas fa-user-graduate"></i>
                            Tên đăng nhập hoặc Email
                        </label>
                        <input type="text"
                               class="form-control"
                               id="username"
                               name="username"
                               placeholder="Nhập tên đăng nhập hoặc email"
                               required>
                        <div class="invalid-feedback">
                            Vui lòng nhập tên đăng nhập hoặc email hợp lệ
                        </div>
                    </div>

                    <!-- Password Field -->
                    <div class="mb-3">
                        <label class="form-label" for="password">
                            <i class="fas fa-lock"></i>
                            Mật khẩu
                        </label>
                        <div class="input-group">
                            <input type="password"
                                   class="form-control"
                                   id="password"
                                   name="password"
                                   placeholder="Nhập mật khẩu"
                                   required>
                            <button type="button" class="password-toggle" id="togglePassword">
                                <i class="far fa-eye"></i>
                            </button>
                        </div>
                        <div class="invalid-feedback">
                            Vui lòng nhập mật khẩu
                        </div>
                    </div>

                    <!-- Options -->
                    <div class="form-options">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="rememberMe" name="remember-me">
                            <label class="form-check-label" for="rememberMe" style="font-size: 0.9rem;">
                                Ghi nhớ đăng nhập
                            </label>
                        </div>
                        <a href="/forgot-password" class="forgot-link">
                            <i class="fas fa-question-circle me-1"></i>
                            Quên mật khẩu?
                        </a>
                    </div>

                    <!-- Login Button -->
                    <div class="mb-4">
                        <button type="submit" class="btn btn-login">
                            <i class="fas fa-sign-in-alt me-2"></i>
                            ĐĂNG NHẬP
                        </button>
                    </div>

                    <!-- Divider -->
                    <div class="divider">
                        <div class="divider-line"></div>
                        <div class="divider-text">Hoặc đăng nhập với</div>
                        <div class="divider-line"></div>
                    </div>

                    <!-- Social Login -->
                    <div class="social-login">
                        <button type="button" class="btn-social">
                            <i class="fab fa-facebook-f" style="color: #1877f2;"></i>
                            <span>Facebook</span>
                        </button>
                        <button type="button" class="btn-social">
                            <i class="fab fa-google" style="color: #db4437;"></i>
                            <span>Google</span>
                        </button>
                    </div>
                </form>

                <!-- Sign Up Link -->
                <div class="signup-section">
                    <p class="signup-text">
                        Chưa có tài khoản?
                        <a href="/register" class="signup-link">
                            Đăng ký ngay
                            <i class="fas fa-arrow-right ms-1"></i>
                        </a>
                    </p>
                    <p class="small text-muted mt-2">
                        Tạo tài khoản để mua sách, theo dõi đơn hàng và nhận ưu đãi
                    </p>
                </div>
            </div>

            <!-- Footer Links -->
            <div class="login-footer">
                <a href="/help" class="footer-link">
                    <i class="fas fa-question-circle me-1"></i>
                    Trợ giúp
                </a>
                <a href="/privacy" class="footer-link">
                    <i class="fas fa-shield-alt me-1"></i>
                    Bảo mật
                </a>
                <a href="/terms" class="footer-link">
                    <i class="fas fa-file-contract me-1"></i>
                    Điều khoản
                </a>
            </div>
        </div>
    </div>
</main>

<!-- JavaScript -->
<script>
    // Toggle password visibility
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');

    togglePassword.addEventListener('click', function() {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);

        // Toggle eye icon
        const eyeIcon = this.querySelector('i');
        if (type === 'text') {
            eyeIcon.classList.remove('fa-eye');
            eyeIcon.classList.add('fa-eye-slash');
        } else {
            eyeIcon.classList.remove('fa-eye-slash');
            eyeIcon.classList.add('fa-eye');
        }
    });

    // Form validation
    const form = document.querySelector('form');
    const usernameInput = document.getElementById('username');

    form.addEventListener('submit', function(event) {
        let isValid = true;

        // Simple validation
        if (!usernameInput.value.trim()) {
            usernameInput.classList.add('is-invalid');
            isValid = false;
        } else {
            usernameInput.classList.remove('is-invalid');
        }

        if (!passwordInput.value.trim()) {
            passwordInput.classList.add('is-invalid');
            isValid = false;
        } else {
            passwordInput.classList.remove('is-invalid');
        }

        if (!isValid) {
            event.preventDefault();
        } else {
            // Add loading effect
            const submitBtn = form.querySelector('.btn-login');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i> Đang xử lý...';
            submitBtn.disabled = true;

            // Re-enable after 3 seconds (for demo)
            setTimeout(() => {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }, 3000);
        }
    });

    // Clear validation on input
    usernameInput.addEventListener('input', function() {
        if (this.value.trim()) {
            this.classList.remove('is-invalid');
        }
    });

    passwordInput.addEventListener('input', function() {
        if (this.value.trim()) {
            this.classList.remove('is-invalid');
        }
    });

    // Add focus effect to inputs
    const formInputs = document.querySelectorAll('.form-control');
    formInputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.parentElement.classList.add('focused');
        });

        input.addEventListener('blur', function() {
            this.parentElement.classList.remove('focused');
        });
    });

    // Social login buttons - demo action
    document.querySelectorAll('.btn-social').forEach(button => {
        button.addEventListener('click', function() {
            const platform = this.querySelector('span').textContent;
            alert(`Tính năng đăng nhập bằng ${platform} đang được phát triển.`);
        });
    });
</script>
</body>
</html>