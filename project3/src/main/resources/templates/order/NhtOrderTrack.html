<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Tra c·ª©u ƒë∆°n h√†ng</title>
    <link rel="stylesheet" th:href="@{/css/nht-style.css}">
</head>

<body class="order-track-page">

<!-- HEADER -->
<th:block th:replace="layout/NhtHeader :: nht_header"></th:block>

<div class="nht-page-wrapper">

    <h2 class="nht-page-title">Tra c·ª©u ƒë∆°n h√†ng</h2>

    <!-- FORM TRA C·ª®U -->
    <form th:action="@{/order/track}"
          th:object="${trackForm}"
          method="post"
          class="nht-track-form">

        <!-- L·ªói form -->
        <div th:if="${#fields.hasAnyErrors()}" class="nht-form-error-group">
            <p th:each="err : ${#fields.allErrors()}" th:text="${err}"></p>
        </div>

        <!-- M√£ ƒë∆°n -->
        <div class="nht-form-group">
            <label class="nht-form-label">M√£ ƒë∆°n h√†ng *</label>
            <div class="nht-form-control">
                <input type="number" th:field="*{orderId}" placeholder="Nh·∫≠p m√£ ƒë∆°n...">
                <div class="nht-field-error"
                     th:if="${#fields.hasErrors('orderId')}"
                     th:errors="*{orderId}"></div>
            </div>
        </div>

        <!-- S·ªë ƒëi·ªán tho·∫°i -->
        <div class="nht-form-group">
            <label class="nht-form-label">S·ªë ƒëi·ªán tho·∫°i *</label>
            <div class="nht-form-control">
                <input type="text" th:field="*{phone}" placeholder="SƒêT khi ƒë·∫∑t h√†ng...">
                <div class="nht-field-error"
                     th:if="${#fields.hasErrors('phone')}"
                     th:errors="*{phone}"></div>
            </div>
        </div>

        <div class="nht-track-submit">
            <button type="submit" class="nht-btn-primary">Tra c·ª©u</button>
        </div>
    </form>

    <!-- KH√îNG T√åM TH·∫§Y -->
    <div th:if="${notFound}" class="nht-track-not-found">
        H√¥ng th·∫•y ƒë∆°n n√†o ph√π h·ª£p h·∫øt ƒë√≥ b·∫°n iu ∆°i. Ki·ªÉm tra l·∫°i gi√∫p m√¨nh nha üíó
    </div>

    <!-- K·∫æT QU·∫¢ -->
    <div th:if="${order != null}" class="nht-track-result">

        <h3 class="nht-result-title">Th√¥ng tin ƒë∆°n h√†ng</h3>

        <div class="nht-order-info">

            <p><b>M√£ ƒë∆°n:</b> <span th:text="${order.id}"></span></p>

            <p><b>Kh√°ch h√†ng:</b> <span th:text="${order.customerName}"></span></p>

            <p><b>S·ªë ƒëi·ªán tho·∫°i:</b> <span th:text="${order.phone}"></span></p>

            <p><b>ƒê·ªãa ch·ªâ:</b> <span th:text="${order.address}"></span></p>

            <p><b>Ghi ch√∫:</b>
                <span th:text="${order.note != null ? order.note : 'Kh√¥ng c√≥'}"></span>
            </p>

            <!-- TR·∫†NG TH√ÅI CHU·∫®N ENUM -->
            <p>
                <b>Tr·∫°ng th√°i:</b>

                <span class="nht-order-status-badge"
                      th:classappend="' status-' + ${order.status.toString().toLowerCase()}"
                      th:switch="${order.status}">

                    <span th:case="'WAIT_CONFIRM'">ƒêang ch·ªù x√°c nh·∫≠n</span>
                    <span th:case="'PREPARING'">ƒêang chu·∫©n b·ªã h√†ng</span>
                    <span th:case="'SHIPPING'">ƒêang giao h√†ng</span>
                    <span th:case="'COMPLETED'">Ho√†n t·∫•t</span>
                    <span th:case="'CANCELLED'">ƒê√£ h·ªßy</span>
                    <span th:case="*">Kh√¥ng x√°c ƒë·ªãnh</span>

                </span>
            </p>

            <p>
                <b>Ng√†y t·∫°o:</b>
                <span th:text="${#temporals.format(order.createdAt,'dd/MM/yyyy HH:mm')}"></span>
            </p>

        </div>

        <!-- B·∫¢NG S·∫¢N PH·∫®M -->
        <table class="nht-cart-table">
            <thead>
            <tr>
                <th>S·∫£n ph·∫©m</th>
                <th>Gi√°</th>
                <th>S·ªë l∆∞·ª£ng</th>
                <th>Th√†nh ti·ªÅn</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="item : ${order.items}">
                <td th:text="${item.productName}"></td>
                <td th:text="${#numbers.formatInteger(item.productPrice,0,'POINT')} + ' ƒë'"></td>
                <td th:text="${item.quantity}"></td>
                <td th:text="${#numbers.formatInteger(item.productPrice * item.quantity,0,'POINT')} + ' ƒë'"></td>
            </tr>
            </tbody>
        </table>

        <!-- TOTAL -->
        <div class="nht-order-total-row">
            <div class="nht-cart-total">
                T·ªïng ti·ªÅn:
                <span th:text="${#numbers.formatInteger(order.totalAmount,0,'POINT')} + ' ƒë'"></span>
            </div>

            <a th:href="@{/}" class="nht-btn-outline">V·ªÅ trang ch·ªß</a>
        </div>

    </div>

</div>
<th:block th:replace="layout/NhtFooter :: nht_footer"></th:block>

</body>
</html>
