<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${product.name}">Chi tiแบฟt sแบฃn phแบฉm - Merry Chismart</title>
    <link rel="stylesheet" th:href="@{/css/qxt-style.css}">
</head>
<body class="product-detail-page">

<!-- HEADER -->
<th:block th:replace="layout/qxtHeader :: qxt_header"></th:block>

<!-- BREADCRUMB -->
<div class="qxt-breadcrumb">
    <a th:href="@{/}">๐ Trang chแปง</a>
    <span>/</span>
    <a th:href="@{/category/all}">ฤแป Trang Trรญ Noel</a>
    <span>/</span>
    <span th:text="${product.name}"></span>
</div>

<section class="qxt-detail-wrap">

    <!-- แบขNH SแบขN PHแบจM -->
    <div class="qxt-detail-img-wrap">
        <img class="detail-img"
             th:src="@{/uploads/product-images/{img}(img=${product.image})}"
             th:alt="${product.name}">
    </div>

    <!-- THรNG TIN -->
    <div class="detail-info">
        <h1 th:text="${product.name}"></h1>

        <p class="price" th:text="${#numbers.formatInteger(product.price,0,'POINT')} + ' ฤ'"></p>

        <div class="product-tags">
            <span class="tag hot">๐ฏ HOT</span>
            <span class="tag discount">๐ Giแบฃm 15%</span>
            <span class="tag shipping">๐ Miแปn phรญ vแบญn chuyแปn</span>
        </div>

        <p class="qxt-detail-desc" th:text="${product.description}"></p>

        <div class="qxt-benefit-wrap">
            <h3>โจ ฤiแปm nแปi bแบญt</h3>
            <ul class="qxt-benefit-list">
                <li>โ Chแบฅt liแปu cao cแบฅp, an toรn</li>
                <li>โ Dแป dรng lแบฏp ฤแบทt vร sแปญ dแปฅng</li>
                <li>โ Thiแบฟt kแบฟ ฤแปc ฤรกo, sรกng tแบกo</li>
                <li>โ ฤรจn LED tiแบฟt kiแปm ฤiแปn</li>
            </ul>
            <ul class="qxt-benefit-list">
                <li>โ Cรณ thแป tรกi sแปญ dแปฅng nhiแปu mรนa</li>
                <li>โ Phรน hแปฃp trang trรญ trong & ngoรi nhร</li>
                <li>โ An toรn cho trแบป em vร vแบญt nuรดi</li>
                <li>โ Bแบฃo hรnh 12 thรกng</li>
            </ul>
        </div>

        <div class="action-buttons">
            <form th:action="@{'/cart/add/' + ${product.id}}" method="post" class="add-to-cart-form">
                <button type="submit" class="btn-primary">๐ Thรชm vรo giแป hรng</button>
            </form>
            <a href="tel:0984551682" class="btn-secondary">๐ Gแปi ฤแบทt hรng ngay</a>
        </div>

        <div class="delivery-info">
            <h3>๐ Thรดng tin giao hรng</h3>
            <ul>
                <li>๐ฆ Giao hรng toรn quแปc trong 2-4 ngรy</li>
                <li>๐ Miแปn phรญ vแบญn chuyแปn ฤฦกn tแปซ 300K</li>
                <li>๐ณ Thanh toรกn khi nhแบญn hรng (COD)</li>
                <li>๐ ฤแปi trแบฃ trong 7 ngรy nแบฟu lแปi</li>
            </ul>
        </div>
    </div>
</section>

<!-- ========== RELATED PRODUCTS ========== -->
<section class="related-products">
    <h2>๐ Sแบฃn phแบฉm liรชn quan</h2>
    <div class="related-grid">
        <!-- Sแบฃn phแบฉm liรชn quan sแบฝ ฤฦฐแปฃc hiแปn thแป tแบกi ฤรขy -->
        <div class="related-item">
            <img src="/images/related-1.jpg" alt="Cรขy thรดng mini">
            <h4>Cรขy Thรดng Noel Mini</h4>
            <p class="price">150.000 ฤ</p>
        </div>
        <div class="related-item">
            <img src="/images/related-2.jpg" alt="ฤรจn nhรกy">
            <h4>Dรขy ฤรจn Nhรกy 5m</h4>
            <p class="price">85.000 ฤ</p>
        </div>
        <div class="related-item">
            <img src="/images/related-3.jpg" alt="Quแบฃ chรขu">
            <h4>Quแบฃ Chรขu Bแบกc</h4>
            <p class="price">35.000 ฤ</p>
        </div>
    </div>
</section>

<!-- ========== COMMENT / REVIEW ========== -->
<section class="qxt-detail-extra">

    <div class="qxt-review-section">
        <h2>โญ ฤรกnh giรก tแปซ khรกch hรng</h2>

        <!-- FORM GแปฌI COMMENT (CHแป HIแปN KHI ฤร ฤฤNG NHแบฌP) -->
        <form class="review-form"
              th:if="${currentUser != null}"
              th:action="@{'/product/' + ${product.id} + '/comment'}"
              method="post">

            <label>ฤรกnh giรก sแบฃn phแบฉm cแปงa bแบกn</label>

            <div class="star-rating">
                <span class="star" data-value="5">โ</span>
                <span class="star" data-value="4">โ</span>
                <span class="star" data-value="3">โ</span>
                <span class="star" data-value="2">โ</span>
                <span class="star" data-value="1">โ</span>
            </div>

            <input type="hidden" name="star" id="selected-rating" value="5">

            <textarea name="content"
                      placeholder="Chia sแบป trแบฃi nghiแปm cแปงa bแบกn vแปi sแบฃn phแบฉm nรy..."
                      required></textarea>

            <button type="submit" class="submit-review">๐ Gแปญi ฤรกnh giรก</button>
        </form>

        <!-- NแบพU CHฦฏA ฤฤNG NHแบฌP -->
        <p th:if="${currentUser == null}" class="login-prompt">
            Vui lรฒng <a th:href="@{/login}">ฤฤng nhแบญp</a> ฤแป ฤรกnh giรก sแบฃn phแบฉm.
        </p>

        <!-- DANH SรCH COMMENT -->
        <div class="qxt-review-card"
             th:each="c : ${comments}">

            <div class="qxt-review-header">
                <span class="reviewer-name" th:text="${c.user.fullName}"></span>
                <span class="qxt-review-stars"
                      th:text="${'โ'.repeat(c.star) + 'โ'.repeat(5-c.star)}"></span>
            </div>

            <p class="review-content" th:text="${c.content}"></p>

            <small class="review-date" th:text="${#temporals.format(c.createdAt,'dd/MM/yyyy HH:mm')}"></small>
        </div>

        <!-- NแบพU CHฦฏA Cร COMMENT -->
        <p th:if="${#lists.isEmpty(comments)}"
           class="no-reviews">
            Chฦฐa cรณ ฤรกnh giรก nรo cho sแบฃn phแบฉm nรy. Hรฃy lร ngฦฐแปi ฤแบงu tiรชn nhรฉ! ๐
        </p>

    </div>
</section>

<div th:insert="~{layout/qxtFooter :: qxt_footer}"></div>

</body>
</html>