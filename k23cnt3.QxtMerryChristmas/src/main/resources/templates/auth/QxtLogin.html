<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ğŸ„ ÄÄƒng Nháº­p - Merry Chismart</title>
    <link rel="stylesheet" th:href="@{/css/qxt-style.css}">
</head>
<body class="login-page">

<!-- HEADER -->
<th:block th:replace="layout/qxtHeader :: qxt_header"></th:block>

<div class="auth-wrapper">
    <div class="auth-container">
        <!-- TiÃªu Ä‘á» vá»›i hÃ¬nh áº£nh Noel -->
        <div class="auth-header">
            <div class="noel-icon">ğŸ…</div>
            <h1>ÄÄƒng Nháº­p Merry Chismart</h1>
            <p class="auth-subtitle">ChÃ o má»«ng Ä‘áº¿n vá»›i cá»­a hÃ ng trang trÃ­ Noel sá»‘ 1</p>
        </div>

        <form th:action="@{/login}" method="post" onsubmit="return validateForm()" class="auth-form">

            <!-- HIDDEN FIELD giá»¯ láº¡i trang cáº§n quay vá» -->
            <input type="hidden" name="redirect" th:value="${redirect}">

            <!-- ThÃ´ng bÃ¡o lá»—i (náº¿u cÃ³) -->
            <div th:if="${param.error}" class="auth-error">
                <p>âŒ Email hoáº·c máº­t kháº©u khÃ´ng Ä‘Ãºng. Vui lÃ²ng thá»­ láº¡i.</p>
            </div>

            <div th:if="${param.logout}" class="auth-success">
                <p>âœ… Báº¡n Ä‘Ã£ Ä‘Äƒng xuáº¥t thÃ nh cÃ´ng.</p>
            </div>

            <div class="form-group">
                <label for="email">ğŸ“§ Email</label>
                <input type="email" name="email" id="email" value=""
                       placeholder="Nháº­p email Ä‘Äƒng kÃ½" required>
                <div class="form-hint">Email báº¡n Ä‘Ã£ dÃ¹ng Ä‘á»ƒ Ä‘Äƒng kÃ½ tÃ i khoáº£n</div>
            </div>

            <div class="form-group">
                <label for="password">ğŸ”’ Máº­t kháº©u</label>
                <div class="password-wrapper">
                    <input type="password" name="password" id="password"
                           placeholder="Nháº­p máº­t kháº©u cá»§a báº¡n" required>
                    <button type="button" class="toggle-pass" onclick="togglePassword()">
                        ğŸ‘ï¸
                    </button>
                </div>
                <div class="form-hint">
                    <a href="/forgot-password" class="forgot-link">ğŸ„ QuÃªn máº­t kháº©u?</a>
                </div>
            </div>

            <div class="form-group remember">
                <label class="checkbox-label">
                    <input type="checkbox" name="remember-me"> Ghi nhá»› Ä‘Äƒng nháº­p
                </label>
            </div>

            <button type="submit" class="auth-btn">ğŸ… ÄÄƒng Nháº­p</button>

            <div class="auth-divider">
                <span>Hoáº·c Ä‘Äƒng nháº­p vá»›i</span>
            </div>

            <div class="social-login">
                <button type="button" class="social-btn facebook">
                    <span>ğŸ“˜ Facebook</span>
                </button>
                <button type="button" class="social-btn google">
                    <span>ğŸ”µ Google</span>
                </button>
            </div>
        </form>

        <div class="auth-switch">
            <p>ğŸ ChÆ°a cÃ³ tÃ i khoáº£n Merry Chismart?</p>
            <a th:href="@{/register}" class="register-link">âœ¨ ÄÄƒng kÃ½ ngay Ä‘á»ƒ nháº­n Æ°u Ä‘Ã£i Noel</a>
        </div>

        <div class="auth-benefits">
            <h3>ğŸ„ Lá»£i Ã­ch khi Ä‘Äƒng nháº­p:</h3>
            <ul>
                <li>âœ… Theo dÃµi Ä‘Æ¡n hÃ ng dá»… dÃ ng</li>
                <li>âœ… LÆ°u danh sÃ¡ch yÃªu thÃ­ch</li>
                <li>âœ… Nháº­n Æ°u Ä‘Ã£i Ä‘áº·c biá»‡t cho thÃ nh viÃªn</li>
                <li>âœ… TÃ­ch lÅ©y Ä‘iá»ƒm Ä‘á»•i quÃ  Noel</li>
                <li>âœ… ÄÆ°á»£c tÆ° váº¥n trang trÃ­ miá»…n phÃ­</li>
            </ul>
        </div>
    </div>
</div>

<script>
    // Kiá»ƒm tra form trÆ°á»›c khi submit
    function validateForm() {
        const email = document.getElementById('email');
        const password = document.getElementById('password');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

        if (!email.value.trim()) {
            alert('ğŸ… Vui lÃ²ng nháº­p email cá»§a báº¡n');
            email.focus();
            return false;
        }

        if (!emailRegex.test(email.value)) {
            alert('ğŸ… Email khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng. Vui lÃ²ng kiá»ƒm tra láº¡i.');
            email.focus();
            return false;
        }

        if (!password.value.trim()) {
            alert('ğŸ… Vui lÃ²ng nháº­p máº­t kháº©u');
            password.focus();
            return false;
        }


        return true;
    }

    // Toggle show/hide password
    function togglePassword() {
        const passInput = document.getElementById('password');
        const toggleBtn = document.querySelector('.toggle-pass');

        if (passInput.type === 'password') {
            passInput.type = 'text';
            toggleBtn.textContent = 'ğŸ‘ï¸â€ğŸ—¨ï¸';
            toggleBtn.setAttribute('aria-label', 'áº¨n máº­t kháº©u');
        } else {
            passInput.type = 'password';
            toggleBtn.textContent = 'ğŸ‘ï¸';
            toggleBtn.setAttribute('aria-label', 'Hiá»ƒn thá»‹ máº­t kháº©u');
        }
    }

    // Tá»± Ä‘á»™ng focus vÃ o email input khi trang load
    document.addEventListener('DOMContentLoaded', function() {
        const emailInput = document.getElementById('email');
        if (emailInput) {
            emailInput.focus();
        }
    });
</script>

</body>
</html>