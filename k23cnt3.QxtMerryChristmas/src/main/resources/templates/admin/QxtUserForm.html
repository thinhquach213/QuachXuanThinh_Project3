<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${formMode == 'CREATE'} ? 'Thêm tài khoản' : 'Sửa tài khoản'"></title>
    <link rel="stylesheet" th:href="@{/css/qxt-admin.css}">
</head>
<body class="qxt-admin-body">

<div class="qxt-admin-main">
    <div class="qxt-admin-panel qxt-admin-panel-sm">

        <h2 th:text="${formMode == 'CREATE'} ? 'Thêm tài khoản' : 'Sửa tài khoản'"></h2>
        <p class="qxt-admin-panel-sub"
           th:text="${user.role.name() == 'ADMIN'} ? 'Tài khoản quản trị' : 'Tài khoản khách hàng'">
        </p>

        <div th:if="${error}" style="color:#fca5a5; margin-top:6px;" th:text="${error}"></div>

        <form th:action="${formMode == 'CREATE'} ? @{/admin/users/create} : @{/admin/users/update}"
              method="post"
              class="qxt-admin-form">

            <input type="hidden" name="id" th:if="${formMode == 'EDIT'}" th:value="${user.id}">
            <input type="hidden" name="role" th:value="${user.role}">

            <div class="qxt-admin-form-group">
                <label class="qxt-admin-label">Họ và tên</label>
                <input class="qxt-admin-input" type="text" name="fullName"
                       th:value="${user.fullName}" required>
            </div>

            <div class="qxt-admin-form-group">
                <label class="qxt-admin-label">Email</label>
                <input class="qxt-admin-input" type="email" name="email"
                       th:value="${user.email}" required>
            </div>

            <div class="qxt-admin-form-group">
                <label class="qxt-admin-label" th:text="${formMode == 'CREATE'} ? 'Mật khẩu' : 'Mật khẩu (để trống nếu không đổi)'"></label>
                <input class="qxt-admin-input" type="password" name="password"
                       th:attr="required=${formMode == 'CREATE'}">
            </div>

            <div class="qxt-admin-form-group">
                <label class="qxt-admin-label">Số điện thoại</label>
                <input class="qxt-admin-input" type="text" name="phone"
                       th:value="${user.phone}">
            </div>

            <div class="qxt-admin-form-actions">
                <a th:href="${user.role.name() == 'ADMIN'} ? @{/admin/admin-users} : @{/admin/customers}"
                   class="qxt-admin-btn-ghost">
                    Hủy
                </a>
                <button type="submit" class="qxt-admin-btn">
                    Lưu
                </button>
            </div>
        </form>
    </div>
</div>

</body>
</html>